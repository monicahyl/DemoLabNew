### 观察者模式
为什么需要观察者模式

问题场景

一个对象状态变化，很多地方要跟着变

举例（不抽象）：
•	订单状态变化 →

    •	发消息
    •	记日志
    •	更新库存
    •	触发积分
•	配置变更 →

    •	刷新缓存
    •	重建连接池
    •	通知业务模块

不好的写法（强耦合）
```java
class OrderService {
    void pay() {
        // 业务逻辑
        sendMessage();
        updateStock();
        addPoint();
    }
}
```

❌ 问题：

•	每加一个行为，就要改 OrderService

•	改动容易引发连锁问题

•	违反开闭原则

简单理解：一笔订单支付成功，通常需要
1. 告知用户订单成功
2. 更新订单状态
3. 记录操作日志
4. .....

在一个方法里面耦合的话，问题就会比较大


二、观察者模式要解决什么

>**把“状态变化” 和 “变化后的反应” 解耦**

核心思想一句话：

> **我只负责“发生了变化”，至于谁关心、怎么反应，我不管**

⸻

三、观察者模式的角色（非常重要）

1️⃣ Subject（被观察者 / 主题）
•	状态的拥有者
•	负责：
•	保存观察者
•	状态变化时通知观察者

2️⃣ Observer（观察者）
•	对变化感兴趣
•	收到通知后做自己的事





**开闭原则（OCP）： 对扩展开放，对修改关闭**
翻译成工程语言就是：
> 需求变了，尽量通过“加代码”，而不是“改旧代码”来实现


